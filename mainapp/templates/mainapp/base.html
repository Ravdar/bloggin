{% load static %}

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="{% static 'styles.css' %}">

<nav class="main-nav">
    <div class="nav-div-1">
        <div class="nav-div-2">
            <div class="nav-div-3-1">
                <a class="logo" href="{% url 'mainapp:main_view' %}">bloggin.</a>
            </div>
            <div class="nav-div-3-2">
            </div>
            <div class="nav-div-3-3">
                {% if user.is_authenticated %}
                <a class="nav-button mr" href="{% url 'mainapp:new_article_view' %}">New article</a>
                <a href="{% url 'users:logout' %}">Log out</a>
                <a href="{% url 'mainapp:user_profile' user.username %}"><img
                        src="{{ user.profile.profile_picture.url }}" id="profile-picture"></a>
                {% else %}
                <a href="{% url 'users:login' %}">Login</a>
                <a class="nav-button ml" href="{% url 'users:register_view' %}">Register</a>
                {% endif %}
            </div>
        </div>
    </div>
</nav>

{% block content %}
<div class="main-div">
    <div class="nav-div-1 jfc">
        <div class="second-div-2">
            {% for article in all_articles %}
            <div class="article-class">
                <div class="pp-and-author">
                    <a href="{% url 'mainapp:user_profile' article.owner.username %}"><img
                            src="{{article.owner.profile.profile_picture.url}}" class="profile-picture-mini"></a>
                    <a href="{% url 'mainapp:user_profile' article.owner.username %}">
                        <h6>{{article.owner.username}}</h6>
                    </a>
                    <span class=" pub-date">{{article.publication_date}}</span>
                </div>
                <a href="{% url 'mainapp:read_article_view' article.url %}"><img src="{{ article.image.url }}"
                        class="article-image-base"></a>
                <h4 id="article-titles"><a
                        href="{% url 'mainapp:read_article_view' article.url %}">{{article.title}}</a>
                </h4>
                {{ article.body|slice:":100" }}...
            </div>
            {% endfor %}
        </div>
        <div class="second-div">
            <h3>Trending articles</h3>
            {% for article in top_articles %}
            <div class="trending-article">
                <div class="pp-and-author-trending">
                    <a href="{% url 'mainapp:user_profile' article.owner.username %}"><img
                            src="{{article.owner.profile.profile_picture.url}}" class="profile-picture-trending"></a>
                    <a
                        href="{% url 'mainapp:user_profile' article.owner.username %}"><span>{{article.owner.username}}</span></a>
                    <span class="pub-date-2">{{article.publication_date}}</span>
                </div>
                <a href="{% url 'mainapp:read_article_view' article.url %}">
                    <h5>{{article.title}}</h5>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock content %}